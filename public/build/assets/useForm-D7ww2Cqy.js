import{L as m,r as E,b as p,I as g}from"./main-BVOUBjs7.js";function O(l={}){const a=m({...l}),c=E({}),u=E(!1),f=p(),i=r=>{c.value=r},n=()=>{c.value={}},d=r=>{delete c.value[r]},h=r=>!!c.value[r],y=r=>{const e=c.value[r];return e?Array.isArray(e)?e[0]:e:""},v=()=>{Object.keys(a).forEach(r=>{a[r]=l[r]}),n()},o=async(r,e,t={})=>{u.value=!0,n();try{const s=await g[r](e,a);return t.onSuccess&&t.onSuccess(s),t.successMessage&&f.success(t.successMessage),t.resetOnSuccess&&v(),s}catch(s){throw s.errors&&i(s.errors),t.onError?t.onError(s):t.silent||s.status!==422&&f.error(s.message||"An error occurred"),s}finally{u.value=!1}};return{form:a,errors:c,loading:u,setErrors:i,clearErrors:n,clearError:d,hasError:h,getError:y,reset:v,submit:o,post:(r,e={})=>o("post",r,e),put:(r,e={})=>o("put",r,e),patch:(r,e={})=>o("patch",r,e),delete:(r,e={})=>o("delete",r,e)}}export{O as u};
