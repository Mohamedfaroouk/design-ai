import{u as U}from"./users-Iw77pHaO.js";import{u as D}from"./roles-DDJ5ckSk.js";import{a as N,b as H,u as L,r as b,s as w,x as z,k as O,g as t,i as m,n as f,j as a,t as i,w as r,o as P,m as p}from"./main-BlFFzjiD.js";import{_ as T,a as F}from"./Modal-BLsvwKiE.js";import{_ as y}from"./Button-Cpf1tbOB.js";import{_ as I}from"./Select-Di2GlW_S.js";/* empty css            */const E={class:"flex items-center justify-between mb-6"},R={class:"space-y-4"},q={class:"w-10 h-10 rounded-full bg-primary-600 text-white flex items-center justify-center"},G={class:"text-sm font-medium"},J={class:"flex items-center gap-2"},K=["onClick"],Q=["onClick"],ae={__name:"UsersIndex",setup(W){const d=U(),x=D(),c=N(),h=H(),{t:l}=L(),v=b(!1),g=b(null),n=b({search:"",sortBy:"created_at",sortOrder:"desc",page:1,perPage:15,role:""}),$=w(()=>[{key:"avatar",label:"",sortable:!1},{key:"name",label:l("users.fields.name"),sortable:!0},{key:"email",label:l("users.fields.email"),sortable:!0},{key:"role",label:l("users.fields.role"),sortable:!1},{key:"created_at",label:l("users.fields.createdAt"),sortable:!0}]),_=w(()=>[{value:"",label:l("common.all")},...x.roles.map(e=>({value:e.id,label:e.name}))]),u=async()=>{try{await d.fetchList(n.value)}catch(e){h.error(e.message||l("common.error"))}},C=e=>{n.value.search=e,n.value.page=1,u()},S=({column:e,order:s})=>{n.value.sortBy=e,n.value.sortOrder=s,u()},M=e=>{n.value.page=e,u()},V=e=>{n.value={...n.value,...e,page:1},u()},B=e=>{g.value=e,v.value=!0},A=async()=>{try{const e=await d.delete(g.value.id);h.success(e.message||l("users.deleteSuccess")),v.value=!1,g.value=null,await u()}catch(e){h.error(e.message||l("common.error"))}};return z(async()=>{await x.fetchList(),await u()}),(e,s)=>(P(),O("div",null,[t("div",E,[t("h1",{class:f(["text-3xl font-bold transition-colors",a(c).darkMode?"text-gray-100":"text-gray-900"])},i(e.$t("users.title")),3),m(y,{variant:"primary",onClick:s[0]||(s[0]=o=>e.$router.push("/admin/users/create"))},{default:r(()=>[s[3]||(s[3]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),p(" "+i(e.$t("users.addNew")),1)]),_:1})]),m(T,{columns:$.value,data:a(d).users,meta:a(d).meta,loading:a(d).loading,filterable:!0,onSearch:C,onSort:S,onPageChange:M,onFilter:V},{filters:r(({filters:o,updateFilter:k})=>[t("div",R,[m(I,{modelValue:o.role,"onUpdate:modelValue":j=>k("role",j),label:e.$t("users.fields.role"),options:_.value},null,8,["modelValue","onUpdate:modelValue","label","options"])])]),"cell-avatar":r(({row:o})=>[t("div",q,[t("span",G,i(o.name.charAt(0)),1)])]),"cell-role":r(({row:o})=>[t("span",{class:f(["px-2 py-1 text-xs font-medium rounded-full transition-colors",a(c).darkMode?"bg-indigo-900/30 text-indigo-400 border border-indigo-700":"bg-indigo-100 text-indigo-800"])},i(o.roles?.[0]?.name||"N/A"),3)]),actions:r(({row:o})=>[t("div",J,[t("button",{onClick:k=>e.$router.push(`/admin/users/${o.id}/edit`),class:f(["transition-colors",a(c).darkMode?"text-indigo-400 hover:text-indigo-300":"text-primary-600 hover:text-primary-900"])},[...s[4]||(s[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],10,K),t("button",{onClick:k=>B(o),class:f(["transition-colors",a(c).darkMode?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-900"])},[...s[5]||(s[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],10,Q)])]),_:1},8,["columns","data","meta","loading"]),m(F,{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=o=>v.value=o),title:e.$t("users.deleteConfirm"),size:"sm"},{footer:r(()=>[m(y,{variant:"secondary",onClick:s[1]||(s[1]=o=>v.value=!1)},{default:r(()=>[p(i(e.$t("common.cancel")),1)]),_:1}),m(y,{variant:"danger",loading:a(d).loading,onClick:A},{default:r(()=>[p(i(e.$t("common.delete")),1)]),_:1},8,["loading"])]),default:r(()=>[t("p",{class:f(a(c).darkMode?"text-gray-300":"text-gray-700")},[p(i(e.$t("users.deleteConfirm"))+" ",1),t("strong",null,i(g.value?.name),1),s[6]||(s[6]=p("? ",-1))],2)]),_:1},8,["modelValue","title"])]))}};export{ae as default};
