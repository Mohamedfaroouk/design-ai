import{u as B,a as E,b as I,r as M,q as T,c as z,w as d,d as L,f as R,o as m,k as v,g as t,n as l,j as o,t as i,i as g,m as h,h as q,p as _}from"./main-BlFFzjiD.js";import{u as N}from"./useForm-CrEMAn_Z.js";import{_ as P}from"./AuthLayout-CdThhCQq.js";import{_ as A}from"./TextInput-Bnmnj4Km.js";import{_ as $}from"./Button-Cpf1tbOB.js";/* empty css            */import"./DarkModeToggle-Cw_QNO_U.js";const F={key:0,class:"text-center space-y-6"},H={class:"flex justify-center"},U={class:"pt-4 space-y-3"},D=["disabled"],O={class:"flex justify-center"},G={class:"text-center"},te={__name:"ForgotPassword",setup(J){const y=L(),{t:c}=B(),s=E(),f=I(),{form:n,errors:k,loading:u,getError:C}=N({email:""}),w=M(!1),a=M(0);let p=null;const S=async()=>{u.value=!0,k.value={};try{const e=await _.forgotPassword(n);w.value=!0,x(),f.success(e.message||c("auth.forgot.emailSentSuccess")),setTimeout(()=>{y.push({name:"otp-verification",query:{email:n.email}})},2e3)}catch(e){e.errors&&(k.value=e.errors),e.status!==422&&f.error(e.message||c("auth.forgot.error"))}finally{u.value=!1}},j=async()=>{if(!(a.value>0)){u.value=!0;try{const e=await _.resendOtp({email:n.email,type:"password_reset"});x(),f.success(e.message||c("auth.forgot.emailResent"))}catch(e){f.error(e.message||c("auth.forgot.resendError"))}finally{u.value=!1}}},x=()=>{a.value=60,p=setInterval(()=>{a.value--,a.value<=0&&clearInterval(p)},1e3)};return T(()=>{p&&clearInterval(p)}),(e,r)=>{const V=R("router-link");return m(),z(P,{title:e.$t("auth.forgot.title"),subtitle:e.$t("auth.forgot.subtitle")},{default:d(()=>[w.value?(m(),v("div",F,[t("div",H,[t("div",{class:l(["w-20 h-20 rounded-full flex items-center justify-center",o(s).darkMode?"bg-success-900/30":"bg-success-100"])},[(m(),v("svg",{class:l(["w-10 h-10",o(s).darkMode?"text-success-400":"text-success-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[2]||(r[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"},null,-1)])],2))],2)]),t("div",null,[t("h3",{class:l(["text-xl font-semibold mb-2 transition-colors",o(s).darkMode?"text-gray-100":"text-gray-900"])},i(e.$t("auth.forgot.emailSent")),3),t("p",{class:l(["text-sm transition-colors",o(s).darkMode?"text-gray-400":"text-gray-600"])},i(e.$t("auth.forgot.checkEmail",{email:o(n).email})),3)]),t("div",U,[g($,{variant:"primary",class:"w-full",onClick:r[0]||(r[0]=b=>o(y).push("/login"))},{default:d(()=>[h(i(e.$t("auth.forgot.backToLogin")),1)]),_:1}),t("button",{type:"button",onClick:j,disabled:a.value>0,class:l(["w-full text-sm font-medium transition-colors",a.value>0?"text-gray-400 cursor-not-allowed":o(s).darkMode?"text-primary-400 hover:text-primary-300":"text-primary-600 hover:text-primary-700"])},i(a.value>0?e.$t("auth.forgot.resendIn",{seconds:a.value}):e.$t("auth.forgot.resendEmail")),11,D)])])):(m(),v("form",{key:1,onSubmit:q(S,["prevent"]),class:"space-y-6"},[t("div",O,[t("div",{class:l(["w-16 h-16 rounded-2xl flex items-center justify-center transition-colors",o(s).darkMode?"bg-primary-900/30":"bg-primary-100"])},[(m(),v("svg",{class:l(["w-8 h-8",o(s).darkMode?"text-primary-400":"text-primary-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[3]||(r[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)])],2))],2)]),g(A,{modelValue:o(n).email,"onUpdate:modelValue":r[1]||(r[1]=b=>o(n).email=b),label:e.$t("auth.forgot.email"),placeholder:e.$t("auth.forgot.emailPlaceholder"),error:o(C)("email"),type:"email",required:"",autocomplete:"email"},{icon:d(()=>[...r[4]||(r[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)])]),_:1},8,["modelValue","label","placeholder","error"]),g($,{type:"submit",variant:"primary",loading:o(u),class:"w-full"},{default:d(()=>[h(i(e.$t("auth.forgot.sendResetLink")),1)]),_:1},8,["loading"]),t("div",G,[g(V,{to:"/login",class:l(["inline-flex items-center gap-2 text-sm font-medium transition-colors",o(s).darkMode?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-700"])},{default:d(()=>[r[5]||(r[5]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),h(" "+i(e.$t("auth.forgot.backToLogin")),1)]),_:1},8,["class"])])],32))]),_:1},8,["title","subtitle"])}}};export{te as default};
