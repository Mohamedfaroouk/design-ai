import{I as S,J as P,u as q,a as O,b as Q,r as v,s as R,C as l,x as W,k as d,g as s,n as p,j as u,t as y,i as V,F as b,z as C,w as j,h as X,o as r,c as B,D as Y,l as I,K as Z,y as ee,v as te,m as H}from"./main-BVOUBjs7.js";import{_ as E}from"./TextInput-CWKz2UHz.js";import{_ as U}from"./Button-Cdjrugd2.js";import{_ as ae}from"./Spinner-DZSAR5Za.js";/* empty css            */const D={fetchAll:i=>S.get("/admin/settings",i),updateBatch:i=>S.put("/admin/settings/batch",{settings:i}),getPublic:()=>S.get("/settings/public")},se=P("adminSettings",{state:()=>({settings:{},loading:!1,saving:!1}),actions:{async fetchAll(i={}){this.loading=!0;try{const a=await D.fetchAll(i);return this.settings=a.data,a}finally{this.loading=!1}},async updateBatch(i){this.saving=!0;try{const a=await D.updateBatch(i);return await this.fetchAll(),a}finally{this.saving=!1}},getSettingValue(i){for(const a in this.settings){const o=this.settings[a].find(h=>h.key===i);if(o)return o.typed_value}return null}}}),re={class:"mb-6"},oe={key:0,class:"flex justify-center items-center py-12"},ne={key:1,class:"space-y-6"},le={class:"-mb-px flex overflow-x-auto scrollbar-hide space-x-4 sm:space-x-8"},ie=["onClick"],ce={class:"flex items-center gap-1.5 sm:gap-2"},de={class:"hidden sm:inline"},ue={class:"sm:hidden"},me={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6"},pe={key:2,class:"flex items-center py-2"},ye=["id","onUpdate:modelValue"],he=["for"],ge={class:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4"},_e={__name:"SettingsIndex",setup(i){const{t:a}=q(),o=O(),h=Q(),g=se(),m=v({}),x=v({}),_=v(!1),f=v(!1),w=v("general"),N=()=>l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),G=()=>l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),L=()=>l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})]),T=()=>l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})]),F=()=>l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})]),z=R(()=>[{key:"general",label:a("settings.groups.general"),icon:N},{key:"email",label:a("settings.groups.email"),icon:G},{key:"appearance",label:a("settings.groups.appearance"),icon:L},{key:"social",label:a("settings.groups.social"),icon:T},{key:"system",label:a("settings.groups.system"),icon:F}]),K=e=>g.settings[e]||[],M=e=>{const c=`settings.fields.${e.replace(/\./g,"_")}`;return a(c)},A=e=>{const c=x.value[e];return c?Array.isArray(c)?c[0]:c:""},$=async()=>{_.value=!0;try{await g.fetchAll();for(const e in g.settings)g.settings[e].forEach(c=>{m.value[c.key]=c.typed_value})}catch(e){h.error(e.message||a("settings.loadError"))}finally{_.value=!1}},J=async()=>{f.value=!0,x.value={};try{await g.updateBatch(m.value),h.success(a("settings.updateSuccess"))}catch(e){e.errors&&(x.value=e.errors),e.status!==422&&h.error(e.message||a("settings.updateError"))}finally{f.value=!1}};return W(()=>{$()}),(e,c)=>(r(),d("div",null,[s("div",re,[s("h1",{class:p(["text-2xl sm:text-3xl font-bold transition-colors",u(o).darkMode?"text-gray-100":"text-gray-900"])},y(e.$t("settings.title")),3),s("p",{class:p(["mt-2 text-sm transition-colors",u(o).darkMode?"text-gray-400":"text-gray-600"])},y(e.$t("settings.subtitle")),3)]),_.value?(r(),d("div",oe,[V(ae,{size:"lg",text:e.$t("common.loading")},null,8,["text"])])):(r(),d("div",ne,[s("div",{class:p(["border-b",u(o).darkMode?"border-gray-700":"border-gray-200"])},[s("nav",le,[(r(!0),d(b,null,C(z.value,n=>(r(),d("button",{key:n.key,onClick:t=>w.value=n.key,class:p(["py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap flex-shrink-0",w.value===n.key?u(o).darkMode?"border-primary-400 text-primary-400":"border-primary-600 text-primary-600":u(o).darkMode?"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[s("span",ce,[(r(),B(Y(n.icon),{class:"w-4 h-4 sm:w-5 sm:h-5"})),s("span",de,y(n.label),1),s("span",ue,y(n.label.split(" ")[0]),1)])],10,ie))),128))])],2),s("form",{onSubmit:X(J,["prevent"]),class:"space-y-6"},[(r(!0),d(b,null,C(z.value,n=>I((r(),d("div",{key:n.key},[s("div",{class:p(["rounded-lg shadow p-4 sm:p-6 transition-colors",u(o).darkMode?"bg-gray-800 border border-gray-700":"bg-white"])},[s("h2",{class:p(["text-lg sm:text-xl font-semibold mb-4 sm:mb-6 transition-colors",u(o).darkMode?"text-gray-100":"text-gray-900"])},y(n.label),3),s("div",me,[(r(!0),d(b,null,C(K(n.key),t=>(r(),d(b,{key:t.key},[t.type==="text"?(r(),B(E,{key:0,modelValue:m.value[t.key],"onUpdate:modelValue":k=>m.value[t.key]=k,label:M(t.key),error:A(t.key)},null,8,["modelValue","onUpdate:modelValue","label","error"])):t.type==="number"?(r(),B(E,{key:1,modelValue:m.value[t.key],"onUpdate:modelValue":k=>m.value[t.key]=k,modelModifiers:{number:!0},type:"number",label:M(t.key),error:A(t.key)},null,8,["modelValue","onUpdate:modelValue","label","error"])):t.type==="boolean"?(r(),d("div",pe,[I(s("input",{id:t.key,"onUpdate:modelValue":k=>m.value[t.key]=k,type:"checkbox",class:p(["w-4 h-4 rounded border-2 transition-all duration-200 cursor-pointer",u(o).darkMode?"border-gray-600 bg-gray-700 checked:bg-primary-600 checked:border-primary-600":"border-gray-300 bg-white checked:bg-primary-600 checked:border-primary-600"])},null,10,ye),[[te,m.value[t.key]]]),s("label",{for:t.key,class:p(["ms-3 text-sm sm:text-base font-medium transition-colors cursor-pointer",u(o).darkMode?"text-gray-300":"text-gray-700"])},y(M(t.key)),11,he)])):ee("",!0)],64))),128))])],2)])),[[Z,w.value===n.key]])),128)),s("div",ge,[V(U,{type:"button",variant:"secondary",onClick:$,disabled:f.value,class:"w-full sm:w-auto"},{default:j(()=>[H(y(e.$t("common.cancel")),1)]),_:1},8,["disabled"]),V(U,{type:"submit",variant:"primary",loading:f.value,class:"w-full sm:w-auto"},{default:j(()=>[H(y(e.$t("common.save")),1)]),_:1},8,["loading"])])],32)]))]))}};export{_e as default};
