import{u as D}from"./roles-DIWl9dWk.js";import{a as j,b as A,u as H,r as y,s as N,x as R,l as L,k as x,g as t,i as v,n,j as a,t as r,w as i,H as z,o as b,m as k,y as I}from"./main-BVOUBjs7.js";import{_ as P,a as T}from"./Modal-DxCEcttx.js";import{_ as h}from"./Button-Cdjrugd2.js";/* empty css            */const O={class:"flex items-center justify-between mb-6"},U={class:"flex items-center gap-2"},E={class:"flex items-center gap-2"},q=["onClick","disabled"],F=["onClick","disabled"],Y={__name:"RolesIndex",setup(G){const m=D(),l=j(),f=A(),{t:d}=H(),u=y(!1),g=y(null),c=y({search:"",sortBy:"created_at",sortOrder:"desc",page:1,perPage:15}),_=N(()=>[{key:"name",label:d("roles.fields.name"),sortable:!0},{key:"permissions",label:d("roles.fields.permissions"),sortable:!1},{key:"created_at",label:d("roles.fields.createdAt"),sortable:!0}]),p=async()=>{try{await m.fetchList(c.value)}catch(e){f.error(e.message||d("common.error"))}},C=e=>{c.value.search=e,c.value.page=1,p()},$=({column:e,order:o})=>{c.value.sortBy=e,c.value.sortOrder=o,p()},w=e=>{c.value.page=e,p()},M=e=>{if(e.is_system){f.warning(d("roles.systemRoleInfo"));return}g.value=e,u.value=!0},S=async()=>{try{const e=await m.delete(g.value.id);f.success(e.message||d("roles.deleteSuccess")),u.value=!1,g.value=null,await p()}catch(e){f.error(e.message||d("common.error"))}};return R(()=>{p()}),(e,o)=>{const B=z("motion-fade");return L((b(),x("div",null,[t("div",O,[t("h1",{class:n(["text-3xl font-bold transition-colors",a(l).darkMode?"text-gray-100":"text-gray-900"])},r(e.$t("roles.title")),3),v(h,{variant:"primary",onClick:o[0]||(o[0]=s=>e.$router.push("/admin/roles/create"))},{default:i(()=>[o[3]||(o[3]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),k(" "+r(e.$t("roles.addNew")),1)]),_:1})]),v(P,{columns:_.value,data:a(m).roles,meta:a(m).meta,loading:a(m).loading,onSearch:C,onSort:$,onPageChange:w},{"cell-name":i(({row:s})=>[t("div",U,[t("span",{class:n(a(l).darkMode?"text-gray-200":"text-gray-900")},r(s.name.charAt(0).toUpperCase()+s.name.slice(1)),3),s.is_system?(b(),x("span",{key:0,class:n(["px-2 py-0.5 text-xs font-medium rounded transition-colors",a(l).darkMode?"bg-blue-900/30 text-blue-400 border border-blue-700":"bg-blue-100 text-blue-800"])},r(e.$t("roles.systemRole")),3)):I("",!0)])]),"cell-permissions":i(({row:s})=>[t("span",{class:n(a(l).darkMode?"text-gray-300":"text-gray-600")},r(s.permissions?.length||0)+" "+r(e.$t("roles.fields.permissions").toLowerCase()),3)]),actions:i(({row:s})=>[t("div",E,[t("button",{onClick:V=>e.$router.push(`/admin/roles/${s.id}/edit`),class:n(["transition-colors",[a(l).darkMode?"text-indigo-400 hover:text-indigo-300":"text-primary-600 hover:text-primary-900",s.is_system&&"opacity-50 cursor-not-allowed"]]),disabled:s.is_system},[...o[4]||(o[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],10,q),t("button",{onClick:V=>M(s),class:n(["transition-colors",[a(l).darkMode?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-900",s.is_system&&"opacity-50 cursor-not-allowed"]]),disabled:s.is_system},[...o[5]||(o[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],10,F)])]),_:1},8,["columns","data","meta","loading"]),v(T,{modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=s=>u.value=s),title:e.$t("roles.deleteConfirm"),size:"sm"},{footer:i(()=>[v(h,{variant:"secondary",onClick:o[1]||(o[1]=s=>u.value=!1)},{default:i(()=>[k(r(e.$t("common.cancel")),1)]),_:1}),v(h,{variant:"danger",loading:a(m).loading,onClick:S},{default:i(()=>[k(r(e.$t("common.delete")),1)]),_:1},8,["loading"])]),default:i(()=>[t("p",{class:n(a(l).darkMode?"text-gray-300":"text-gray-700")},r(e.$t("roles.deleteMessage")),3),t("p",{class:n(["mt-2 font-semibold",a(l).darkMode?"text-gray-200":"text-gray-900"])},r(g.value?.name),3)]),_:1},8,["modelValue","title"])])),[[B]])}}};export{Y as default};
